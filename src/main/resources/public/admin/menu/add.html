<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
    <div id="app">
        <template>
            <el-form label-position="right" label-width="80px" :model="form">
                <el-form-item label="名称">
                    <el-input v-model="form.name"></el-input>
                </el-form-item>
                <el-form-item label="排序">
                    <el-input v-model="form.sortIndex"></el-input>tip：越小越排前
                </el-form-item>
                <el-form-item label="url">
                    <el-input v-model="form.url"></el-input>
                </el-form-item>
                <el-button type="primary" @click="save">保存</el-button>
            </el-form>
        </template>
    </div>
</body>
    <script type="text/javascript" src="../../js/vue.js"></script>
    <script type="text/javascript" src="../../js/url.js"></script>
    <script type="text/javascript" src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script>
        var Main = {
            methods: {
                handleClick(row) {
                    console.log(row);
                },
                save(){
                    var self = this;
                    axios.post("/admin/menus/edit",this.form).then(function(response){
                        console.log(response);
                        if(response.data){
                           self.$message({
                              showClose: true,
                              message: '保存成功',
                              type: 'success'
                            });
                        }
                    });
                },
                findOne(){
                    var self = this;
                    axios.get("/admin/menus/selectById",{params:{"id":this.form.id}}).then(function(response){
                        console.log(response);
                        if(response != null && response.data != null){
                            var info = response.data;
                            self.form.name = info.name;
                            self.form.url = info.url;
                            self.form.sortIndex = info.sortIndex;
                        }
                    });
                },
            },
            data() {
                return {
                    form: {
                        id:'',
                        name:'',
                        url:'',
                        sortIndex:''
                    }
                }
            },
            mounted:function(){
                var param = GetRequest();
                if(param != null){
                    this.form.id = param.id;
                    this.findOne();
                }
            }
        }
        var Ctor = Vue.extend(Main)
        new Ctor().$mount('#app')
    </script>
</html>